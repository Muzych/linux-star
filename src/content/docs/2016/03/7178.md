---
author: wxy
category: 技术
comments_data:
- date: '2016-03-31 16:19:59'
  message: 什么情况
  postip: 60.28.234.34
  username: 来自天津的 Opera 36.0|Windows 10 用户
- date: '2016-03-31 16:26:40'
  message: 看来微软要把开发人员牢牢绑定在win10上.得码工者得天下，微软也是拼了.
  postip: 119.255.36.18
  username: 来自北京的 Chrome 48.0|FreeBSD 用户
- date: '2016-03-31 17:12:29'
  message: 我个人还是看好这个，虽然 OS X 是 UNIX 系统，也能使用一些 GNU 软件，但是毕竟内核不同，不是什么软件都支持，如果靠虚拟化解决，那同在
    Windows 下用虚拟化方案没啥不同，最多就是虚拟化的技术存在一些差异，但是一部针对桌面的虚拟化方案能有什么不同？如果微软能做好对 Linux 内核的反向支持，能让大部分不是高度依赖
    Linux 内核的软件正常运行，目标用户又用做 Linux 非底层软件开发，那么相较于 MacBook 的价格，相对低廉的 Windows 10 笔记本还是有吸引力的。当然不足可能是存在的，比如文件名，文件属性这些，要知道
    Linux 对文
  postip: 118.122.120.235
  username: 来自四川成都的 Chrome 49.0|GNU/Linux 用户
- date: '2016-03-31 17:13:43'
  message: 件名的限制非常少，但如果 Windows 10 是直接把 Linux 软件放在 NTFS 或 ReFS 文件系统，这方面肯定有限制，还有文件名大小写区分这些，以及像
    chattr 这些扩展属性，不过 ACL 这个倒是不用担心，微软的 ACL 设置要比 setfacl/getfacl 细的多，而且不仅仅是文件系统在用，进程，注册表这些都在用。
  postip: 118.122.120.235
  username: 来自四川成都的 Chrome 49.0|GNU/Linux 用户
- date: '2016-03-31 17:14:59'
  message: 当然不足肯定是存在的，
  postip: 118.122.120.235
  username: 来自四川成都的 Chrome 49.0|GNU/Linux 用户
- date: '2016-03-31 17:22:01'
  message: 更简单来说，如果这个项目确实能很好运行 CLI 界面 Linux 软件，并且子系统消耗内存不多，CPU 资源不多的话，我就可以不用 VirtualBox
    来跑一个对系统服务进行过必要精简的 CentOS 7 来在只有 2G 内存的 Surface 3 跑一些 Linux 服务了。
  postip: 118.122.120.235
  username: 来自四川成都的 Chrome 49.0|GNU/Linux 用户
- date: '2016-03-31 18:44:25'
  message: 有这个确实会方便些，但是目前这样子不足以让人转换阵营
  postip: 116.31.81.182
  username: 来自广东广州的 Firefox 45.0|Ubuntu 用户
- date: '2016-03-31 19:08:45'
  message: 既然如此，那就应该让微软提供windows向linux的WINE转换啊。现在的linux WINE做得肯定不会比微软好
  postip: 121.32.6.171
  username: 来自广东广州的 Firefox 45.0|Ubuntu 用户
- date: '2016-04-01 00:13:22'
  message: 以后的小白就会说，linux是windows的子系统
  postip: 14.215.165.4
  username: 来自广东佛山的 Firefox 38.0|GNU/Linux 用户
- date: '2016-04-01 00:19:45'
  message: 拥抱 扩展 毁灭
  postip: 14.215.165.4
  username: 来自广东佛山的 Firefox 38.0|GNU/Linux 用户
- date: '2016-04-01 01:48:02'
  message: "我个人觉得，简单来说：<br />\r\nCanonical&nbsp;&nbsp;--&gt;&nbsp;&nbsp;微软&nbsp;&nbsp;「√」&nbsp;
    &nbsp; （Canonical说：我来了。微软说：行，来吧）<br />\r\n微软&nbsp;&nbsp;--&gt;&nbsp;&nbsp;WINE&nbsp;&nbsp;「╳」&nbsp;
    &nbsp; （微软说：不行，我没这闲功夫，我不干）<br />\r\n<br />\r\n你觉得呢？"
  postip: 39.159.3.111
  username: kashu [Chromium 49.0|Ubuntu]
- date: '2016-04-01 10:32:03'
  message: "win10内置shell: 摇摆用户更方便使用win桌面环境,提升win10占用率<br />\r\nms加强wine: 摇摆用户更方便使用linux桌面,
    提升linux桌面占有率.<br />\r\n<br />\r\n你觉得ms会怎么做?"
  postip: 113.140.27.142
  username: 来自陕西西安的 Chrome 49.0|GNU/Linux 用户
- date: '2016-04-01 11:17:49'
  message: 差不多就这意思，一看就明白。
  postip: 39.159.0.198
  username: kashu [Chromium 49.0|Ubuntu]
- date: '2016-04-01 15:28:31'
  message: 如果是Linux下跑windows还能接受&nbsp; &nbsp;windows下跑linux&nbsp;&nbsp;就windows那内存占用率还是算了吧
  postip: 171.8.75.81
  username: mycolors [Opera 36.0|Windows 10]
- date: '2016-04-01 16:45:02'
  message: 所以微軟還是想乾掉linux,只不過不是消滅而是吃進去共存.
  postip: 116.6.43.200
  username: 来自广东中山的 Internet Explorer 8.0|Windows 7 用户
- date: '2016-04-01 19:49:03'
  message: 文件权限怎么解决？
  postip: 180.136.70.48
  username: 来自广西桂林的 Chrome 49.0|Windows 7 用户
- date: '2016-04-02 13:33:56'
  message: 软链接怎么搞的
  postip: 39.187.168.225
  username: 来自浙江杭州的 Firefox 45.0|GNU/Linux 用户
- date: '2016-04-03 00:29:42'
  message: 能运行桌面应用吗？
  postip: 183.2.82.49
  username: 绿色圣光 [Firefox 45.0|GNU/Linux]
- date: '2016-04-03 10:18:29'
  message: 目前不能，不过我觉得理论上是可行的。但是微软也许不考虑这样做。
  postip: 120.12.19.121
  username: linux [Chrome 49.0|Mac 10.11]
- date: '2016-04-03 21:41:26'
  message: 这么多人看到 Ubuntu on Windows 就准备抛弃 OS X 转投 Windows 10 了？微软画的大饼看看就好了，何必当真呢！
  postip: 111.253.197.126
  username: hazdzz [Firefox 45.0|Mac 10.9]
- date: '2016-04-04 16:30:06'
  message: 微软可能只会让它运行终端程序，桌面的应该不会
  postip: 113.57.163.205
  username: lovetoheart [QQ Browser 9.3|Windows 7]
- date: '2016-04-04 20:37:14'
  message: 为什么我电脑打不开Bash？
  postip: 223.81.193.70
  username: 来自山东的 Chrome 49.0|Windows 10 用户
- date: '2016-04-04 20:45:20'
  message: 还没更新呢，等 redstone 版
  postip: 111.197.252.125
  username: linux [Chrome 49.0|Mac 10.11]
- date: '2016-04-08 08:49:53'
  message: 一个很有远景的部署，微软在开源的路上越走越快了，表忘记盖茨本人也是一个早期骇客，他是具有开源精神的领袖人物
  postip: 202.74.253.41
  username: 来自日本的 Firefox 45.0|Windows 7 用户
count:
  commentnum: 24
  favtimes: 4
  likes: 0
  sharetimes: 0
  viewnum: 24017
date: '2016-03-31 16:07:18'
editorchoice: false
excerpt: 本文带你揭开“Ubuntu on Windows”的神秘一角。Dustin Kirkland  是该项目组的成员之一，他的体验可以让我们感受一下这个“超级神秘”的项目。
fromurl: ''
id: 7178
islctt: false
largepic: /data/attachment/album/201603/31/160721hcwz5cbo2cgc40ez.jpg
permalink: /article-7178-1.html
pic: /data/attachment/album/201603/31/160721hcwz5cbo2cgc40ez.jpg.thumb.jpg
related:
- displayorder: 0
  raid: 7177
- displayorder: 0
  raid: 7179
- displayorder: 0
  raid: 7209
- displayorder: 0
  raid: 7215
- displayorder: 0
  raid: 7445
- displayorder: 0
  raid: 7613
- displayorder: 0
  raid: 7857
reviewer: ''
selector: ''
summary: 本文带你揭开“Ubuntu on Windows”的神秘一角。Dustin Kirkland  是该项目组的成员之一，他的体验可以让我们感受一下这个“超级神秘”的项目。
tags:
- Ubuntu
thumb: false
title: “Ubuntu on Windows” 初体验
titlepic: false
translator: ''
updated: '2016-03-31 16:07:18'
---

在 Windows 10 中原生运行 Linux bash 和其它的 ELF 二进制程序？对，你没看错，这就是昨晚微软[宣布](/article-7177-1.html)的“Ubuntu on Windows”项目所披露的事实——而且，今天不是 4/1。


之前就有传闻说，微软在 [Windows 10 里暗藏神秘 Linux 子系统！](/article-6979-1.html)现在，传闻变成真的了。


![Ubuntu on Windows 10](/data/attachment/album/201603/31/160721hcwz5cbo2cgc40ez.jpg)


据该项目的合作方， Ubnutu 背后的 Canonical 公司的产品与战略负责人 [Dustin Kirkland](https://www.linkedin.com/in/dustinkirkland/) 说，他在几个月前听说这个疯狂的想法时也懵了，花费了不少工夫才理解这后面发生了什么。


本文带你揭开“Ubuntu on Windows”的神秘一角。


首先，让我们看看发生了什么？


1. 首先你得有个 Windows 10
2. 打开 Windows 开始菜单
3. 输入“bash” （没有引号），回车
4. 这会打开一个 cmd.exe 窗口
5. 运行 Ubuntu 的 /bin/bash
6. 宾果！你可以完全访问所有的 Ubuntu 用户空间了
7. 没错，这包括 apt、 ssh、 rsync、 find、 grep、 awk、 sed、 sort、 xargs、 md5sum、 gpg、 curl、 wget、apache、 mysql、 python、 perl、 ruby、 php、 gcc、 tar、 vim、 emacs、 diff、 patch 等等
8. 以及，Ubuntu 软件库中数以万计的 ELF 二进制程序中的绝大多数！


![Bash](/data/attachment/album/201603/31/151117fu333omffsp3o494.jpg)


“好吧，这是一个运行在虚拟机的 Ubuntu 吗？” 不！**这根本不是一个虚拟机**，不用在虚拟机中启动 Linux 内核，它就是 Ubuntu 的用户空间。


“哦，那是运行在容器里面啰？” 不不！**这也不是一个容器**，这是在 Windows 里面直接运行原生的 Ubuntu 二进制程序。


“嗯，就像 cygwin 那样？”不不不！cygwin 所包括的开源程序是以源代码重新编译后才能原生运行在 Windows 上。而这里，我们说的是一个比特都不差、校验值**完全一样的 Ubuntu 的 ELF 二进制程序可以直接运行在 Windows 下**！


... ...


“那么，这就像是模拟器一样么？”这就比较接近真相了，来自微软的一些尖端技术人员正在研究一种技术，可以**将 Linux 的系统调用实时地转换为 Windows 的系统调用**。你可以把它当成 Wine 的一种反向技术。微软将其称之为“<ruby> Windows 下的 Linux 子系统 <rt>  Windows Subsystem for Linux </rt></ruby>”，当然现在还没有开源。（我觉得网友 [delectate](https://linux.cn/space/23856/) 说的比较有趣，这个东西不如叫做 mine=microsoft's native emulator 。）


而且，根据 [Dustin Kirkland](https://www.linkedin.com/in/dustinkirkland/) 的[说法](http://blog.dustinkirkland.com/2016/03/ubuntu-on-windows.html)，使用跨平台的性能测试工具 sysbench 进行测试的结果发现，在 Windows 下运行这些原生的 ELF 二进制程序和在 Linux 下运行所消耗的 CPU 、内存和 IO 性能相当。对于这个结果，我表示非常的吃惊！


[Dustin Kirkland](https://www.linkedin.com/in/dustinkirkland/) 是该项目组的成员之一，他的体验可以让我们感受一下这个“超级神秘”的项目。


由于需要将整个 Ubuntu 的根文件系统打包到一个 Windows 应用软件包（.appx）中，这位已经十几年没有使用过 Windows 的老兄对微软开发工具十分陌生，在经过几个小时与 Visual Studio 的痛苦搏斗，制作了一堆各种尺寸的 png 图标，编辑了一打以上的 XML 文件后，他简直忍不住要将咖啡杯扔到该死的屏幕上了。


到最后，他终于寻求他所熟悉的 Linux 经验解决了这些问题。


按下 Windows 键，输入“bash”，回车！他发现这个要上载的根文件系统的内容放在 /mnt/c/Users/Kirkland/Downloads 下，只需要使用一个 cp -a 复制到目标位置即可，并用 find | xargs |rename 来批量更新文件名，用 grep| xargs | sed 搜索替换路径，用 convert 工具快速地批量缩放图标，简直不要太容易地搞定了这些工作，剩下的就只需要让 Visual Studio 自己干了，编译、上载到 Windows Store。搞定！


嗯，你也许从终端窗口中看到了 /mnt/c ，没错，这就是你的 Windows 下的 C: 盘，它们以读写模式直接挂载到 /mnt 下了。当然，你也可以在 Windows 下通过类似如下的路径访问 Ubuntu 的文件系统：C:\Users\Kirkland\AppData\Local\Lxss\rootfs\ 。


![文件系统](/data/attachment/album/201603/31/151003ljojc3jbkomm1mjm.jpg)


同时，如果需要 ssh 连接到其它的 Linux 上，你根本不用下载 putty，直接输入 ssh 即可：


![ssh](/data/attachment/album/201603/31/151329dupcfwbc1wppw8v6.jpg)


当然，你也可以使用 apt 来安装和更新软件包：


![apt](/data/attachment/album/201603/31/151425vz7crhkosobarzdt.jpg)


到目前为止，是不是所有的东西都可以完美工作了？还不全是。[LTP](https://github.com/linux-test-project/ltp) 测试中的大多数都没问题，但是有一些则还不行，主要是 tty 相关的部分，比如 byobu、screen、tmux 等还不能很好的工作，不过相信也快了。


另外，顺便提一句，当前这个子系统所采用的 Linux 镜像是 Ubuntu 14.04 LTS，等 16.04 LTS 发布后相信很快就会更新到 Windows Store 上。